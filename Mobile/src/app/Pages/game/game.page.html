<ion-header>
  <ion-toolbar>
    <ion-title> Juego </ion-title>
    <ion-buttons slot="start">
      <ion-back-button defaultHref='/home'></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
  <ion-toolbar *ngIf="gameView?.gamePlayers.length == 2">
    <ion-title>{{player?.name}} VS {{opponent?.name}}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div id="app" class="app">
    <div class="container">
      <div class="row">
        <div class="col">
          <div class="row">
            <div class="col">
              <h2 class="text-center">Barcos</h2>
              <div class="shipsStatus mx-auto">
                <span
                  ><img id="CarrierIcon" src="assets/img/carrierafloat.png"
                /></span>
                <span
                  ><img
                    id="BattleShipIcon"
                    src="assets/img/battleshipafloat.png"
                /></span>
                <span
                  ><img id="SubmarineIcon" src="assets/img/submarineafloat.png"
                /></span>
                <span
                  ><img id="DestroyerIcon" src="assets/img/destroyerafloat.png"
                /></span>
                <span
                  ><img
                    id="PatroalBoatIcon"
                    src="assets/img/patroalboatafloat.png"
                /></span>
              </div>
            </div>
          </div>
          <div class="row mt-1">
            <div class="col">
              <button
                *ngIf="gameView?.ships && gameView.ships.length < 5 && disparar"
                class="btn btn-success btn-sm mb-3"
                (click)="placeShips2()"
              >
                Posicionar barcos!!
              </button>
              <div class="grid-ships mx-auto">
                <!-- div que usa la librería gridstack grid-stack-10 se indica que son 10 columnas-->
                <div id="grid" class="grid-stack grid-stack-10"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12">
          <div class="row col-12">
            <div class="col">
              <h2 class="text-center">Salvos</h2>
              <div class="shipsStatus mx-auto">
                <span
                  ><img
                    id="OpponentCarrierIcon"
                    src="assets/img/carrierafloat.png"
                /></span>
                <span
                  ><img
                    id="OpponentBattleShipIcon"
                    src="assets/img/battleshipafloat.png"
                /></span>
                <span
                  ><img
                    id="OpponentSubmarineIcon"
                    src="assets/img/submarineafloat.png"
                /></span>
                <span
                  ><img
                    id="OpponentDestroyerIcon"
                    src="assets/img/destroyerafloat.png"
                /></span>
                <span
                  ><img
                    id="OpponentPatroalBoatIcon"
                    src="assets/img/patroalboatafloat.png"
                /></span>
              </div>
            </div>
          </div>
          <div class="row mt-1">
            <div class="col-12 d-block">
              <button
                *ngIf="gameView?.gameState == 'ENTER_SALVO' && disparar"
                class="btn btn-success btn-sm mb-3"
                (click)="placeSalvosfront()"
              >
                Disparar salvos!!
              </button>
              <table class="salvo-table">
                <thead>
                  <tr>
                    <th></th>
                    <th>1</th>
                    <th>2</th>
                    <th>3</th>
                    <th>4</th>
                    <th>5</th>
                    <th>6</th>
                    <th>7</th>
                    <th>8</th>
                    <th>9</th>
                    <th>10</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="td-info">A</td>
                    <td class="salvo" id="A1"></td>
                    <td class="salvo" id="A2"></td>
                    <td class="salvo" id="A3"></td>
                    <td class="salvo" id="A4"></td>
                    <td class="salvo" id="A5"></td>
                    <td class="salvo" id="A6"></td>
                    <td class="salvo" id="A7"></td>
                    <td class="salvo" id="A8"></td>
                    <td class="salvo" id="A9"></td>
                    <td class="salvo" id="A10"></td>
                  </tr>
                  <tr>
                    <td class="td-info">B</td>
                    <td class="salvo" id="B1"></td>
                    <td class="salvo" id="B2"></td>
                    <td class="salvo" id="B3"></td>
                    <td class="salvo" id="B4"></td>
                    <td class="salvo" id="B5"></td>
                    <td class="salvo" id="B6"></td>
                    <td class="salvo" id="B7"></td>
                    <td class="salvo" id="B8"></td>
                    <td class="salvo" id="B9"></td>
                    <td class="salvo" id="B10"></td>
                  </tr>
                  <tr>
                    <td class="td-info">C</td>
                    <td class="salvo" id="C1"></td>
                    <td class="salvo" id="C2"></td>
                    <td class="salvo" id="C3"></td>
                    <td class="salvo" id="C4"></td>
                    <td class="salvo" id="C5"></td>
                    <td class="salvo" id="C6"></td>
                    <td class="salvo" id="C7"></td>
                    <td class="salvo" id="C8"></td>
                    <td class="salvo" id="C9"></td>
                    <td class="salvo" id="C10"></td>
                  </tr>
                  <tr>
                    <td class="td-info">D</td>
                    <td class="salvo" id="D1"></td>
                    <td class="salvo" id="D2"></td>
                    <td class="salvo" id="D3"></td>
                    <td class="salvo" id="D4"></td>
                    <td class="salvo" id="D5"></td>
                    <td class="salvo" id="D6"></td>
                    <td class="salvo" id="D7"></td>
                    <td class="salvo" id="D8"></td>
                    <td class="salvo" id="D9"></td>
                    <td class="salvo" id="D10"></td>
                  </tr>
                  <tr>
                    <td class="td-info">E</td>
                    <td class="salvo" id="E1"></td>
                    <td class="salvo" id="E2"></td>
                    <td class="salvo" id="E3"></td>
                    <td class="salvo" id="E4"></td>
                    <td class="salvo" id="E5"></td>
                    <td class="salvo" id="E6"></td>
                    <td class="salvo" id="E7"></td>
                    <td class="salvo" id="E8"></td>
                    <td class="salvo" id="E9"></td>
                    <td class="salvo" id="E10"></td>
                  </tr>
                  <tr>
                    <td class="td-info">F</td>
                    <td class="salvo" id="F1"></td>
                    <td class="salvo" id="F2"></td>
                    <td class="salvo" id="F3"></td>
                    <td class="salvo" id="F4"></td>
                    <td class="salvo" id="F5"></td>
                    <td class="salvo" id="F6"></td>
                    <td class="salvo" id="F7"></td>
                    <td class="salvo" id="F8"></td>
                    <td class="salvo" id="F9"></td>
                    <td class="salvo" id="F10"></td>
                  </tr>
                  <tr>
                    <td class="td-info">G</td>
                    <td class="salvo" id="G1"></td>
                    <td class="salvo" id="G2"></td>
                    <td class="salvo" id="G3"></td>
                    <td class="salvo" id="G4"></td>
                    <td class="salvo" id="G5"></td>
                    <td class="salvo" id="G6"></td>
                    <td class="salvo" id="G7"></td>
                    <td class="salvo" id="G8"></td>
                    <td class="salvo" id="G9"></td>
                    <td class="salvo" id="G10"></td>
                  </tr>
                  <tr>
                    <td class="td-info">H</td>
                    <td class="salvo" id="H1"></td>
                    <td class="salvo" id="H2"></td>
                    <td class="salvo" id="H3"></td>
                    <td class="salvo" id="H4"></td>
                    <td class="salvo" id="H5"></td>
                    <td class="salvo" id="H6"></td>
                    <td class="salvo" id="H7"></td>
                    <td class="salvo" id="H8"></td>
                    <td class="salvo" id="H9"></td>
                    <td class="salvo" id="H10"></td>
                  </tr>
                  <tr>
                    <td class="td-info">I</td>
                    <td class="salvo" id="I1"></td>
                    <td class="salvo" id="I2"></td>
                    <td class="salvo" id="I3"></td>
                    <td class="salvo" id="I4"></td>
                    <td class="salvo" id="I5"></td>
                    <td class="salvo" id="I6"></td>
                    <td class="salvo" id="I7"></td>
                    <td class="salvo" id="I8"></td>
                    <td class="salvo" id="I9"></td>
                    <td class="salvo" id="I10"></td>
                  </tr>
                  <tr>
                    <td class="td-info">J</td>
                    <td class="salvo" id="J1"></td>
                    <td class="salvo" id="J2"></td>
                    <td class="salvo" id="J3"></td>
                    <td class="salvo" id="J4"></td>
                    <td class="salvo" id="J5"></td>
                    <td class="salvo" id="J6"></td>
                    <td class="salvo" id="J7"></td>
                    <td class="salvo" id="J8"></td>
                    <td class="salvo" id="J9"></td>
                    <td class="salvo" id="J10"></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      <div class="row mt-2">
        <div class="col">
          <div class="row">
            <div class="col">
              <table class="table table-sm table-dark table-striped">
                <thead>
                  <tr>
                    <th>Turno</th>
                    <th>Daños</th>
                  </tr>
                </thead>
                <tbody>
                  <div *ngIf="gameView">
                    <tr *ngFor="let hit of gameView.hits">
                      <td>{{hit.turn}}</td>
                      <td>
                        <span *ngFor="let shipHit of hit.hits">
                          {{shipHit.hits.length > 0 ? shipHit.type +' (' +
                          shipHit.hits.length + ') ' : ''}}
                        </span>
                      </td>
                    </tr>
                  </div>
                </tbody>
              </table>
            </div>
            <div class="col">
              <table class="table table-sm table-dark table-striped">
                <thead>
                  <tr>
                    <th>Turno</th>
                    <th>Daños</th>
                  </tr>
                </thead>
                <tbody>
                  <div *ngIf="gameView">
                    <tr *ngFor="let hit of gameView.hitsOpponent">
                      <td>hit.turn</td>
                      <td>
                        <span *ngFor="let shipHit in hit.hits">
                          shipHit.hits.length > 0 ? shipHit.type +' (' +
                          shipHit.hits.length + ') ' : ''
                        </span>
                      </td>
                    </tr>
                  </div>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ion-content>

<ion-footer keyboard-attach class="item-input-inset" *ngIf="selectGif">

  <ion-item>
    <ion-input  placeholder="Enviar mensaje" [(ngModel)]="msg"></ion-input>
    <ion-button slot="end" (click)="sendMessage()"><ion-icon name="send-outline"></ion-icon></ion-button>
  </ion-item>

</ion-footer>

<ion-footer collapse="fade" class="ion-no-border">
  <ion-toolbar>
    <ion-title>{{getGameState(state)}}</ion-title>
    <ion-icon
      (click)="showGif()"
      class="mr-2"
      slot="end"
      name="chatbubble-outline"
    ></ion-icon>
    <ion-progress-bar type="indeterminate"></ion-progress-bar>
  </ion-toolbar>
</ion-footer>
